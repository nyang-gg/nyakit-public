function int(t){return Math.trunc(t)}function float(t){return t}class Field{getName(){return this.name}getType(){return this.type}get(t){return t[this.name]}}function get_type(t){return Object.prototype.toString.call(t).slice(8,-1)}class FieldOrder{static MAP=new Map;static getDeclaredFields(t){if(this.MAP.has(t))return this.MAP.get(t);let e=function getDeclaredFields(t){let e=[],s=Reflect.ownKeys(t);for(let r of s){if("symbol"==typeof r)continue;let s=get_type(t[r]),a=new Field;a.name=r,a.type=s,e.push(a);}return e}(t),s=[];for(let t=0;t<e.length;t++)s[t]=(new FieldOrder).FieldOrder(e[t],t);s.sort(((t,e)=>t.order-e.order));for(let t=0;t<e.length;t++)e[t]=s[t].field;return this.MAP.set(t,e),e}FieldOrder(t,e){return this.field=t,this.order=e,this}}class Data{static SE_CANNON=[[25,26],[60],[61],[36,37],[65,83],[84,85],[86],[124]];static SE_ALL=[15,19,20,21,22,23,24,25,26,27,36,37,44,45,50,59,60,61,65,73,74,83,84,85,86,90,110,111,112,124];static MLV=[30,30,30,30,30,30,30,10,30];static MT=[300,300,300,300,300,300,600,600,600,300,300];static BCShareable=[52,53];static REMOVABLE_PROC=[1,2,8,12,19,22,23];static PC_CORRES=[[-1,0,0,-1],[0,8,3,-1],[0,1,2,-1],[0,2,2,-1],[1,8,0,-1],[1,1,0,-1],[1,2,0,-1],[1,4,0,-1],[0,0,1,-1],[0,11,4,-1],[0,24,2,-1],[0,25,1,-1],[0,53,0,-1],[0,3,1,-1],[1,512,0,-1],[0,9,1,-1],[0,52,0,-1],[0,4,2,-1],[0,31,1,-1],[0,27,1,-1],[0,28,1,-1],[0,26,1,-1],[0,29,1,-1],[1,32,0,-1],[0,32,1,-1],[2,3,1,-1],[2,4,1,-1],[2,2,1,-1],[2,5,1,-1],[3,33,0,30],[0,33,1,-1],[2,1,1,-1],[2,0,1,-1],[4,0,0,-1],[4,1,0,-1],[4,2,0,-1],[4,3,0,-1],[4,4,0,-1],[4,5,0,-1],[4,6,0,-1],[4,8,0,-1],[4,9,0,-1],[4,11,0,-1],[4,10,0,-1],[3,31,0,18],[3,27,0,19],[3,28,0,20],[3,26,0,21],[3,29,0,22],[3,32,0,24],[0,20,2,-1],[0,44,2,-1],[0,37,1,-1],[3,37,0,52],[0,30,1,-1],[3,30,0,55],[0,7,4,-1],[4,7,0,-1],[0,10,1,-1],[1,1<<18,0,-1],[0,12,2,-1],[2,6,1,-1],[0,5,3,-1],[1,1<<17,0,-1],[0,54,2,-1],[0,55,4,-1],[1,1<<20,0,-1],[0,58,0,-1]];static A_POIS=[34,35,36,37,38,39,40,41];static A_PATH=["down","up","slow","stop","shield","farattack","wave_invalid","wave_stop","waveguard"];static KB_PRI=[2,4,5,1,3];static KB_TIME=[11,23,47,11,-1];static KB_DIS=[165,345,705,55,-1];static NYPRE=[18,1,-1,27,37,18,10,1];static NYRAN=[400,82.5,-1,500,500,400,100,82.5];static ORB_ATK_MULTI=[100,200,300,400,500];static ORB_RES_MULTI=[4,8,12,16,20];static ORB_STR_DEF_MULTI=[2,4,6,8,10];static ORB_STR_ATK_MULTI=[.06,.12,.18,.24,.3];static ORB_MASSIVE_MULTI=[.1,.2,.3,.4,.5];static ORB_RESISTANT_MULTI=[5,10,15,20,25];static ORB_DEATH_SURGE_MULT=[3,6,10,14,20];static ORB_WAVE_RESIST_MULT=[5,10,20,30,50];static ORB_MONEY_BACK_MULT=[5,10,20,30,50];static ORB_KB_RESIST_MULT=[5,10,20,30,50];static ORB_LEGEND_HEATLH=[5,10,20,30,50];static ORB_LEGEND_ATTACK=[5,10,20,30,50];static ORB_BARON_DAMAGE=[105,115,125,140,160];static ORB_BARON_DEFENSE=[95,90,85,80,70];static GATYA=[30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,160,161,164,167,168,169,170,171,179,180,181,182,183,184];static BG_EFFECT_BLIZZARD_SIZE=[1,1.5,2];static BG_EFFECT_ROCK_SIZE=[1,2.25];static BG_EFFECT_ROCK_SPEED=[1,3];static SHAKE_MODE_HIT=[5,7,2,30];static SHAKE_MODE_BOSS=[10,15,2,0];static SUPER_SAGE_RESIST_TYPE=["IMUWEAK","IMUSTOP","IMUSLOW","IMUCURSE","IMUKB","IMUWARP"];static SUFX=["f","c","s","u"];static hex(t){return this.trio(int(t/1e3))+this.trio(t%1e3)}static restrict(t){return t.length<32?t:t.substring(0,32)}static duo(t){return t<10?"0"+t:""+t}static trio(t){return t<10?"00"+t:t<100?"0"+t:""+t}}!function(t){class Proc{static blank(){return console.log("blank",Proc),new Proc}static getDeclaredFields(){return Proc.$blank||(Proc.$blank=Proc.blank()),FieldOrder.getDeclaredFields(Proc.$blank)}KB=new Data.Proc.PTD;STOP=new Data.Proc.PT;SLOW=new Data.Proc.PT;CRIT=new Data.Proc.PM;WAVE=new Data.Proc.WAVE;MINIWAVE=new Data.Proc.MINIWAVE;MOVEWAVE=new Data.Proc.MOVEWAVE;VOLC=new Data.Proc.VOLC;WEAK=new Data.Proc.WEAK;BREAK=new Data.Proc.PROB;SHIELDBREAK=new Data.Proc.PROB;WARP=new Data.Proc.WARP;CURSE=new Data.Proc.PT;SEAL=new Data.Proc.PT;SUMMON=new Data.Proc.SUMMON;TIME=new Data.Proc.TIME;SNIPER=new Data.Proc.PROB;THEME=new Data.Proc.THEME;BOSS=new Data.Proc.PROB;POISON=new Data.Proc.POISON;SATK=new Data.Proc.PM;POIATK=new Data.Proc.PM;ARMOR=new Data.Proc.ARMOR;SPEED=new Data.Proc.SPEED;STRONG=new Data.Proc.STRONG;LETHAL=new Data.Proc.PROB;IMUKB=new Data.Proc.IMU;IMUSTOP=new Data.Proc.IMU;IMUSLOW=new Data.Proc.IMU;IMUWAVE=new Data.Proc.WAVEI;IMUVOLC=new Data.Proc.WAVEI;IMUWEAK=new Data.Proc.IMUAD;IMUWARP=new Data.Proc.IMU;IMUCURSE=new Data.Proc.IMU;IMUSEAL=new Data.Proc.IMU;IMUSUMMON=new Data.Proc.IMU;IMUPOI=new Data.Proc.IMUAD;IMUPOIATK=new Data.Proc.IMU;IMUMOVING=new Data.Proc.WAVEI;IMUCANNON=new Data.Proc.CANNI;IMUARMOR=new Data.Proc.IMUAD;IMUSPEED=new Data.Proc.IMUAD;CRITI=new Data.Proc.IMU;COUNTER=new Data.Proc.COUNTER;IMUATK=new Data.Proc.PT;DMGCUT=new Data.Proc.DMGCUT;DMGCAP=new Data.Proc.DMGCAP;BURROW=new Data.Proc.BURROW;REVIVE=new Data.Proc.REVIVE;BARRIER=new Data.Proc.BARRIER;DEMONSHIELD=new Data.Proc.DSHIELD;DEATHSURGE=new Data.Proc.VOLC;BOUNTY=new Data.Proc.MULT;ATKBASE=new Data.Proc.MULT;BSTHUNT=new Data.Proc.BSTHUNT;MINIVOLC=new Data.Proc.MINIVOLC;SPIRIT=new Data.Proc.SPIRIT;METALKILL=new Data.Proc.MULT;SPEEDUP=new Data.Proc.SPEEDUP;BLAST=new Data.Proc.BLAST;IMUBLAST=new Data.Proc.IMU;getArr(t){try{return Proc.getDeclaredFields()[t].get(this)}catch(t){return console.error(t),null}}}t.Proc=Proc,function(t){class ProcItem{getDeclaredFields(){return FieldOrder.getDeclaredFields(this)}exists(){try{const t=this.getDeclaredFields();for(const e of t)if("Number"===e.getType()){const t=e.get(this);if("prob"===e.getName()&&0===t)return !1;if(0!==t)return !0}else if("Null"===e.getType()&&null!==e.get(this))return !0}catch(t){console.error(t);}return  false}}t.ProcItem=ProcItem;class IntType{}t.IntType=IntType;t.ARMOR=class ARMOR extends ProcItem{prob=0;time=0;mult=0};t.BURROW=class BURROW extends ProcItem{count=0;dis=0};t.IMU=class IMU extends ProcItem{mult=0;block=0};t.IMUAD=class IMUAD extends ProcItem{mult=0;block=0;smartImu=0};class DMGCUT extends ProcItem{static TYPE=class TYPE extends IntType{traitIgnore=false;procs=false;magnif=false;static $name="DMGCUT.TYPE"};prob=0;dmg=0;reduction=0;type=new DMGCUT.TYPE}t.DMGCUT=DMGCUT;class DMGCAP extends ProcItem{static TYPE=class TYPE extends IntType{traitIgnore=false;nullify=false;procs=false;magnif=false;static $name="DMGCAP.TYPE"};prob=0;dmg=0;type=new DMGCAP.TYPE}t.DMGCAP=DMGCAP;t.MOVEWAVE=class MOVEWAVE extends ProcItem{prob=0;speed=0;width=0;time=0;dis=0;itv=0};t.PM=class PM extends ProcItem{prob=0;mult=0};class POISON extends ProcItem{static TYPE=class TYPE extends IntType{damage_type=0;unstackable=false;ignoreMetal=false;modifAffected=false;static $name="POISON.TYPE"};prob=0;time=0;damage=0;itv=0;type=new POISON.TYPE}t.POISON=POISON;t.PROB=class PROB extends ProcItem{prob=0};t.MULT=class MULT extends ProcItem{mult=0};t.PT=class PT extends ProcItem{prob=0;time=0};t.PTD=class PTD extends ProcItem{prob=0;time=0;dis=0};t.WARP=class WARP extends ProcItem{prob=0;time=0;dis_0=0;dis_1=0};t.TIME=class TIME extends ProcItem{prob=0;time=0;intensity=0};class REVIVE extends ProcItem{static TYPE=class TYPE extends IntType{range_type=0;imu_zkill=false;revive_non_zombie=false;revive_others=false;static $name="REVIVE.TYPE"};count=0;time=0;health=0;dis_0=0;dis_1=0;type=new REVIVE.TYPE}t.REVIVE=REVIVE;class BARRIER extends ProcItem{static TYPE=class TYPE extends IntType{magnif=false;static $name="BARRIER.TYPE"};health=0;regentime=0;timeout=0;type=new BARRIER.TYPE}t.BARRIER=BARRIER;t.SPEED=class SPEED extends ProcItem{prob=0;time=0;speed=0;type=0};t.STRONG=class STRONG extends ProcItem{health=0;mult=0};t.SPEEDUP=class SPEEDUP extends ProcItem{health=0;mult=0};class SUMMON extends ProcItem{static TYPE=class TYPE extends IntType{anim_type=0;ignore_limit=false;fix_buff=false;same_health=false;bond_hp=false;on_hit=false;on_kill=false;static $name="SUMMON.TYPE"};prob=0;id=null;dis=0;max_dis=0;mult=0;min_layer=0;max_layer=0;type=new SUMMON.TYPE;time=0;form=0}t.SUMMON=SUMMON;class THEME extends ProcItem{static TYPE=class TYPE extends IntType{kill=false;static $name="THEME.TYPE"};prob=0;time=0;id=null;mus=null;type=new THEME.TYPE}t.THEME=THEME;class COUNTER extends ProcItem{static TYPE=class TYPE extends IntType{counterWave=0;procType=0;useOwnDamage=false;outRange=false;areaAttack=false;static $name="COUNTER.TYPE"};prob=0;damage=0;minRange=0;maxRange=0;type=new COUNTER.TYPE}t.COUNTER=COUNTER;t.VOLC=class VOLC extends ProcItem{prob=0;dis_0=0;dis_1=0;time=0};t.WAVE=class WAVE extends ProcItem{prob=0;lv=0;inverted=false};t.MINIWAVE=class MINIWAVE extends ProcItem{prob=0;lv=0;multi=0;inverted=false};t.WAVEI=class WAVEI extends ProcItem{mult=0};t.CANNI=class CANNI extends ProcItem{mult=0;type=0};t.WEAK=class WEAK extends ProcItem{prob=0;time=0;mult=0};t.DSHIELD=class DSHIELD extends ProcItem{hp=0;regen=0};class BSTHUNT extends ProcItem{static TYPE=class TYPE extends IntType{active=false;static $name="BSTHUNT.TYPE"};type=new BSTHUNT.TYPE;prob=0;time=0}t.BSTHUNT=BSTHUNT;t.MINIVOLC=class MINIVOLC extends ProcItem{prob=0;dis_0=0;dis_1=0;time=0;mult=0};t.BLAST=class BLAST extends ProcItem{prob=0;dis_0=0;dis_1=0};t.SPIRIT=class SPIRIT extends ProcItem{id=null};}(Proc||(Proc=t.Proc||(t.Proc={})));}(Data||(Data={}));class Identifier{static DEF="000000";Identifier(t,e,s){return this.cls=e,this.pack=t,this.id=s,this}static $fields=["pack","cls","id"]}class IndexContainer{getNextID(t){let e=this.getList(t,{reduce:(t,e)=>e.nextInd()},0);return (new Identifier).Identifier(this.getSID(),t,e)}}!function(t){t.Indexable=class Indexable{getCont(){return this.getID().getCont()}};}(IndexContainer||(IndexContainer={}));const copyProps=(t,e,s=[])=>{const r=Object.getOwnPropertyDescriptors(e);for(let t of s)delete r[t];Object.defineProperties(t,r);},protoChain=(t,e=[t])=>{const s=Object.getPrototypeOf(t);return null===s?e:protoChain(s,[...e,s])},hardMixProtos=(t,e,s=[])=>{var r;const a=null!==(r=((...t)=>{if(0===t.length)return;let e;const s=t.map((t=>protoChain(t)));for(;s.every((t=>t.length>0));){const t=s.map((t=>t.pop())),r=t[0];if(!t.every((t=>t===r)))break;e=r;}return e})(...t))&&void 0!==r?r:Object.prototype,i=Object.create(a),n=protoChain(a);for(let e of t){let t=protoChain(e);for(let e=t.length-1;e>=0;e--){let r=t[e];-1===n.indexOf(r)&&(copyProps(i,r,["constructor",...s]),n.push(r));}}return i.constructor=e,i},unique=t=>t.filter(((e,s)=>t.indexOf(e)==s)),t=new WeakMap,getMixinsForClass=e=>t.get(e),mergeObjectsOfDecorators=(t,e)=>{var s,r;const a=unique([...Object.getOwnPropertyNames(t),...Object.getOwnPropertyNames(e)]),i={};for(let n of a)i[n]=unique([...null!==(s=null==t?void 0:t[n])&&void 0!==s?s:[],...null!==(r=null==e?void 0:e[n])&&void 0!==r?r:[]]);return i},mergePropertyAndMethodDecorators=(t,e)=>{var s,r,a,i;return {property:mergeObjectsOfDecorators(null!==(s=null==t?void 0:t.property)&&void 0!==s?s:{},null!==(r=null==e?void 0:e.property)&&void 0!==r?r:{}),method:mergeObjectsOfDecorators(null!==(a=null==t?void 0:t.method)&&void 0!==a?a:{},null!==(i=null==e?void 0:e.method)&&void 0!==i?i:{})}},e=new Map,deepDecoratorSearch=(...t)=>{const s=((...t)=>{var e;const s=new Set,r=new Set([...t]);for(;r.size>0;)for(let t of r){const a=[...protoChain(t.prototype).map((t=>t.constructor)),...null!==(e=getMixinsForClass(t))&&void 0!==e?e:[]].filter((t=>!s.has(t)));for(let t of a)r.add(t);s.add(t),r.delete(t);}return [...s]})(...t).map((t=>e.get(t))).filter((t=>!!t));return 0==s.length?{}:1==s.length?s[0]:s.reduce(((t,e)=>((t,e)=>{var s,r,a,i,n,l;return {class:unique([...null!==(s=null==t?void 0:t.class)&&void 0!==s?s:[],...null!==(r=null==e?void 0:e.class)&&void 0!==r?r:[]]),static:mergePropertyAndMethodDecorators(null!==(a=null==t?void 0:t.static)&&void 0!==a?a:{},null!==(i=null==e?void 0:e.static)&&void 0!==i?i:{}),instance:mergePropertyAndMethodDecorators(null!==(n=null==t?void 0:t.instance)&&void 0!==n?n:{},null!==(l=null==e?void 0:e.instance)&&void 0!==l?l:{})}})(t,e)))};function Mixin(...e){var s,r,a;const i=e.map((t=>t.prototype));function MixedClass(...t){for(const s of e)copyProps(this,new s(...t));}MixedClass.prototype=hardMixProtos(i,MixedClass),Object.setPrototypeOf(MixedClass,hardMixProtos(e,null,["prototype"]));let n=MixedClass;{const t=deepDecoratorSearch(...e);for(let e of null!==(s=null==t?void 0:t.class)&&void 0!==s?s:[]){const t=e(n);t&&(n=t);}applyPropAndMethodDecorators(null!==(r=null==t?void 0:t.static)&&void 0!==r?r:{},n),applyPropAndMethodDecorators(null!==(a=null==t?void 0:t.instance)&&void 0!==a?a:{},n.prototype);}return ((e,s)=>{t.set(e,s);})(n,e),n}const applyPropAndMethodDecorators=(t,e)=>{const s=t.property,r=t.method;if(s)for(let t in s)for(let r of s[t])r(e,t);if(r)for(let t in r)for(let s of r[t])s(e,t,Object.getOwnPropertyDescriptor(e,t));};class IndexablePackDataTrait extends IndexContainer.Indexable{}class Trait extends(Mixin(Data,IndexablePackDataTrait)){static TRAIT=["red","floating","black","metal","angel","alien","zombie","aku","relic","white","evaAngel","witch","colossus","behemoth","sage","base"];static $revive(t,e){return t.id=(new Identifier).Identifier(Identifier.DEF,"Trait",Number(e)),t.BCTrait=true,t.name=Trait.TRAIT[Number(e)],t}name="new trait";icon=null;BCTrait=false;others=new Array;Trait(t){return this.id=t,this}getID(){return this.id}toString(){return this.id+" - "+this.name}}const s={copyOf:(t,e)=>{const s=t.slice(0,e);for(;s.length<e;)s.push(void 0);return s},fill(t,e){for(let s=0;s<t.length;s++)t[s]=e;}};const r=function make_new_x(t=void 0){return function new_x(...e){return function new_lengthed(t,e){const build=s=>{const r=t[s];return s===t.length-1?new Array(r).fill(e):new Array(r).fill(void 0).map((()=>build(s+1)))};return 0===t.length?0:build(0)}(e,t)}}(0);class ArrayUtil{static size(t){return t.length}static add(t,e){t.push(e);}static get(t,e){return t[e]}static set(t,e,s){const r=t[e];return t[e]=s,r}static contains(t,e){return t.includes(e)}static remove(t,e){if("number"==typeof e){const[s]=t.splice(e,1);return s}{const s=t.indexOf(e);return  -1!==s&&(t.splice(s,1),true)}}static removeValue(t,e){const s=t.indexOf(e);return  -1!==s&&(t.splice(s,1),true)}static clear(t){t.length=0;}static clone(t){return t.map((t=>Array.isArray(t)?ArrayUtil.clone(t):t))}static isEmpty(t){return 0===t.length}}class FixIndexList extends Data{_size=0;FixIndexList(t){return this.arr=new Array(16),this}add(t){const e=this.nextInd();this.set(e,t);}clear(){s.fill(this.arr,null),this._size=0;}contains(t){if(null==t)return  false;for(const e of this.arr)if(t==e)return  true;return  false}expand(t){t<=this.arr.length||(this.arr=s.copyOf(this.arr,2*this.arr.length));}get(t){return t<0||t>=this.arr.length?null:this.arr[t]}getList(){const t=new Array(this._size);for(const e of this.arr)null!=e&&t.push(e);return t}indexOf(t){for(let e=0;e<this.arr.length;e++)if(null!=this.arr[e]&&this.arr[e]==t)return e;return  -1}nextInd(){for(let t=0;t<this.arr.length;t++)if(null==this.arr[t])return t;return this.expand(2*this.arr.length),this.arr.length/2}set(t,e){for(;this.arr.length<=t;)this.expand(2*this.arr.length);null!=this.arr[t]&&this._size--,null!=e&&this._size++,this.arr[t]=e;}size(){return this._size}}!function(t){t.FixIndexMap=class FixIndexMap extends FixIndexList{FixIndexMap(t){return super.FixIndexList(t),this.cls=t,this.order=r(16),this}clear(){super.clear(),s.fill(this.order,0);}expand(t){super.expand(t),t<this.order.length||(this.order=s.copyOf(this.order,t));}getList(){const t=new Array(this._size);for(let e=0;e<this._size;e++)ArrayUtil.add(t,this.arr[this.order[e]]);return t}};}(FixIndexList||(FixIndexList={}));class PackData extends IndexContainer{traits=(new FixIndexList.FixIndexMap).FixIndexMap("Trait");getList(t,e,s){return "Trait"===t&&(s=e.reduce(s,this.traits)),s}}!function(t){t.DefPack=class DefPack extends PackData{getSID(){return Identifier.DEF}load(){Trait.addBCTraits();}};}(PackData||(PackData={}));class UserProfile{static REG_POOL="_pools";static REG_STATIC="_statics";static CURRENT_PACK="_current_pack";static _profile=null;static getBCData(){return this.profile().def}static getRegister(t,e){let s=this.profile().registers.get(t);return null==s&&this.profile().registers.set(t,s=new Map),s}static getStatic(t,e){const s=this.getRegister(UserProfile.REG_STATIC,"Object");let r=s.get(t);return null==r&&s.set(t,r=e.get()),r}static profile(){return null==this._profile&&(this._profile=new UserProfile,null!=CommonStatic.ctx&&CommonStatic.ctx.initProfile()),this._profile}static setStatic(t,e){this.getRegister(UserProfile.REG_STATIC,"Object").set(t,e);}def=new PackData.DefPack;registers=new Map}const Character_isDigit=t=>1===t.length&&/\p{Nd}/u.test(t);class Enum{constructor(t){this._name=t;const e=this.constructor.values();this._ordinal=e.length,e.push(this);}name(){return this._name}ordinal(){return this._ordinal}toString(){return this._name}static values(){const t=this;return t._values||(t._values=[]),t._values}}class CommonStatic{static max=2147483647;static min=-2147483648;static getConfig(){return UserProfile.getStatic("config",{get:()=>new CommonStatic.Config})}static isInteger(t){if(0===(t=t.trim()).length)return  false;for(let e=0;e<t.length;e++)if(!Character_isDigit(t.charAt(e))&&("-"!==t.charAt(e)||0!==e))return  false;return  true}static dataEnemyMinPos(t){return 2.5*int((t.confs[0][2]-t.parts[0][6])*t.parts[0][8]/t.ints[0])}}!function(t){t.Config=class Config{deadOpa=10;fullOpa=90;ints=[1,1,1,2];ref=false;battle=false;icon=false;twoRow=true;plus=false;levelLimit=0;lang=Lang.Locale.KR;maxBackup=5;prefLevel=50;drawBGEffect=true;buttonDelay=true;viewerColor=-1;exContinuation=false;realEx=false;stageName=true;shake=true;updateOldMusic=true;realLevel=false;performanceModeAnimation=true;performanceModeBattle=false};class Lang{}t.Lang=Lang,function(t){class Locale extends Enum{static EN=new Locale("EN").Locale("en");static ZH=new Locale("ZH").Locale("zh");static KR=new Locale("KR").Locale("kr");static JP=new Locale("JP").Locale("jp");static RU=new Locale("RU").Locale("ru");static DE=new Locale("DE").Locale("de");static FR=new Locale("FR").Locale("fr");static ES=new Locale("ES").Locale("es");static IT=new Locale("IT").Locale("it");static TH=new Locale("TH").Locale("th");Locale(t){return this.code=t,this}toString(){return this.code}}t.Locale=Locale,t.pref=[[Lang.Locale.EN,Lang.Locale.FR,Lang.Locale.IT,Lang.Locale.ES,Lang.Locale.DE,Lang.Locale.RU,Lang.Locale.JP,Lang.Locale.ZH,Lang.Locale.KR],[Lang.Locale.ZH,Lang.Locale.JP,Lang.Locale.EN,Lang.Locale.KR],[Lang.Locale.KR,Lang.Locale.JP,Lang.Locale.EN,Lang.Locale.ZH],[Lang.Locale.JP,Lang.Locale.EN,Lang.Locale.ZH,Lang.Locale.KR],[Lang.Locale.RU,Lang.Locale.EN,Lang.Locale.JP,Lang.Locale.ZH,Lang.Locale.KR],[Lang.Locale.DE,Lang.Locale.EN,Lang.Locale.JP,Lang.Locale.ZH,Lang.Locale.KR],[Lang.Locale.FR,Lang.Locale.EN,Lang.Locale.JP,Lang.Locale.ZH,Lang.Locale.KR],[Lang.Locale.ES,Lang.Locale.EN,Lang.Locale.JP,Lang.Locale.ZH,Lang.Locale.KR],[Lang.Locale.IT,Lang.Locale.EN,Lang.Locale.JP,Lang.Locale.ZH,Lang.Locale.KR],[Lang.Locale.TH,Lang.Locale.EN,Lang.Locale.JP,Lang.Locale.ZH,Lang.Locale.KR]];}(Lang||(Lang=t.Lang||(t.Lang={})));}(CommonStatic||(CommonStatic={}));class MaskEntity{}class DataEntity extends(Mixin(Data,MaskEntity)){hp=0;hb=0;speed=0;range=0;abi=0;width=0;loop=-1;will=0;type=0;shield=0;traits=[];getAbi(){return this.abi}getAtkLoop(){return this.loop}getDeathAnim(){return this.death}getTraits(){return this.traits}getHb(){return this.hb}getHp(){return this.hp}getRange(){return this.range}getSpeed(){return this.speed}getWidth(){return this.width}getWill(){return this.will}}class DefaultData extends DataEntity{lds=r(1);ldr=r(1);atk=0;atk1=0;atk2=0;pre=0;pre1=0;pre2=0;abi0=1;abi1=0;abi2=0;tba=0;allAtk(){return this.atk+this.atk1+this.atk2}getAllProc(){return this.proc}getAtkCount(){return 0==this.atk1?1:0==this.atk2?2:3}getAtkModel(t){return t>=this.getAtkCount()||null==this.datks||t>=this.datks.length?null:this.datks[t]}getAtks(){return this.datks}getItv(){return this.getLongPre()+Math.max(this.getTBA()-1,this.getPost())}getPost(){return this.getAnimLen()-this.getLongPre()}getProc(){return this.proc}getRepAtk(){return this.datks[0]}getTBA(){return 2*this.tba}isLD(){for(let t=0;t<this.ldr.length;t++)if(this.ldr[t]<=0)return  false;return  true}isOmni(){for(let t=0;t<this.ldr.length;t++)if(this.ldr[t]<0)return  true;return  false}isRange(){return this.isrange}rawAtkData(){const t=r(this.getAtkCount(),4);return t[0][0]=this.atk,t[0][1]=this.pre,t[0][2]=this.abi0,t[0][3]=1,0===this.atk1?t:(t[1][0]=this.atk1,t[1][1]=this.pre1-this.pre,t[1][2]=this.abi1,t[1][3]=1,0===this.atk2||(t[2][0]=this.atk2,t[2][1]=this.pre2-this.pre1,t[2][2]=this.abi2,t[2][3]=1),t)}touchBase(){return this.lds[0]>0?this.lds[0]:this.range}getLongPre(){return this.pre2>0?this.pre2:this.pre1>0?this.pre1:this.pre}isCommon(){for(const t of this.rawAtkData())if(1!=t[2])return  false;return  true}}class MaskAtk{getAltAbi(){return 0}getDire(){return 1}getMove(){return 0}getTarget(){return 1}loopCount(){return  -1}}class DataAtk extends MaskAtk{DataAtk(t,e){return this.data=t,this.index=e,this}getAtk(){switch(this.index){case 0:return this.data.atk;case 1:return this.data.atk1;case 2:return this.data.atk2;default:return 0}}isOmni(){return this.data.ldr[this.index]<0}getLongPoint(){return this.index>=this.data.lds.length?this.data.lds[0]+this.data.ldr[0]:this.data.lds[this.index]+this.data.ldr[this.index]}getProc(){return this.data.proc}getSPtrait(){return  false}getShortPoint(){return this.index>=this.data.lds.length?this.data.lds[0]:this.data.lds[this.index]}isRange(){return this.data.isrange}}function isNullish(t){return null==t}function isClassConstructor(t,e){if("function"!=typeof t)return  false;if(!/^class[\s{]/.test(Function.prototype.toString.call(t)))return  false;try{Reflect.construct(Function,[],t);}catch{return  false}const s=Object.getOwnPropertyDescriptor(t,"prototype");if(!s||false!==s.writable)return  false;if(e){if(!(t.prototype instanceof e))return  false}return  true}const a=["s","n","b"],i=["string","number","boolean"];function overload(...t){let e=true;for(const s of t){if(isNullish(s[1])){if(isNullish(s[0]))continue;e=false;break}if(i.includes(s[1])){if(typeof s[0]===s[1])continue;e=false;break}if(a.includes(s[1])){if(typeof s[0]===i[a.indexOf(s[1])])continue;e=false;break}if(isTypedArrayString(s[1])){if(isTypedArray(s[0],s[1]))continue;e=false;break}try{if(s[0]instanceof s[1])continue;e=!1;break}catch(t){}}return e}function isTypedArrayString(t){if("string"!=typeof t)return  false;const e=t.match(/^(\w+)((?:\[\])*)$/);if(!e)return  false;const s=e[1],r=e[2].length/2;return "number"===s&&r>0}function isTypedArray(t,e){const s=e.match(/^(\w+)((?:\[\])*)$/);if(!s)return  false;const r=s[1];return function check(t,e){return e>0?Array.isArray(t)&&t.every((t=>check(t,e-1))):typeof t===r}(t,s[2].length/2)}const System_arraycopy=(t,e,s,r,a)=>s.splice(r,a,...t.slice(e,e+a));class Level{level=0;plusLevel=0;Level(t,e,s,a){if(overload([t],[e],[s],[a])&&(this.level=1,this.talents=[]),overload([t,"n"],[e],[s],[a])){let e=t;this.level=1,this.talents=r(e);}if(overload([t,"n"],[e,"n"],[s,"number[]"],[a])){let r=t;this.level=Math.max(1,r),this.plusLevel=e,console.log(s),this.talents=ArrayUtil.clone(s);}if(overload([t,"n"],[e,"n"],[s,"number[]"],[a,"number[][]"])){let r=t;if(this.Level(r,e,s),null==a)return;let i=true;for(const t of a){if(null==t){i=false;break}if(0!=t.length&&3!=t.length){i=false;break}}i&&(this.orbs=a);}return this}clone(){return null!=this.orbs?(new Level).Level(this.level,this.plusLevel,this.talents,ArrayUtil.clone(this.orbs)):(new Level).Level(this.level,this.plusLevel,this.talents)}getLv(){return this.level}getPlusLv(){return this.plusLevel}getOrbs(){return this.orbs}getTalents(){return this.talents}setLevel(t){this.level=t;}setPlusLevel(t){this.plusLevel=t;}setTalents(t){this.talents=ArrayUtil.clone(t);}setLvs(t){this.level=Math.max(1,t.level),this.plusLevel=t.plusLevel,t.talents.length<this.talents.length?System_arraycopy(t.talents,0,this.talents,0,t.talents.length):this.talents=ArrayUtil.clone(t.talents),null!=t.orbs&&(this.orbs=ArrayUtil.clone(t.orbs));}setOrbs(t){if(null==t)return void(this.orbs=null);let e=true;for(const s of t){if(null==s){e=false;break}if(0!=s.length&&3!=s.length){e=false;break}}e&&(this.orbs=t);}}class Unit extends Data{static UnitInfo=class UnitInfo{price=r(10);xp=0;zeroXp=0;type=0;tfLevel=-1;zeroLevel=-1;hasEvolveCost(){return null!=this.evo}hasZeroForm(){return null!=this.zeroEvo}};rarity=0;max=0;maxp=0;info=new Unit.UnitInfo;getPrefLvs(){for(const t of this.forms);let t;return t=(new Level).Level(0),t.setLevel(this.getPreferredLevel()),t.setPlusLevel(this.getPreferredPlusLevel()),t}getPreferredLevel(){return Math.min(30,this.max)}getPreferredPlusLevel(){let t=Math.max(0,30-this.getPreferredLevel());return Math.min(t,this.maxp)}}class ImgCore extends Data{static randSeries=new Array;static set(t){CommonStatic.getConfig().battle;}drawImg(t,e,s,r,a,i,n,l){const o=i>=1&&i<=3||-1==i;if(a<.01*CommonStatic.getConfig().fullOpa-1e-5?o?t.setComposite(2,int(256*a),i):t.setComposite(1,int(256*a),0):o?t.setComposite(2,256,i):t.setComposite(0,0,0),0==n&&0==l)this.drawImage(t,e,-s.x,-s.y,r.x,r.y);else {let a=-s.x,i=-s.y,o=l,c=n;if(0==l)for(;n>1;)this.drawImage(t,e,a,i,r.x,r.y),a+=r.x,n--;else {const o=n;for(;l>1;){if(0==n)this.drawImage(t,e,a,i,r.x,r.y);else for(a=-s.x,n=o;n>1;)this.drawImage(t,e,a,i,r.x,r.y),a+=r.x,n--;i+=r.y,l--;}}const h=e.getWidth(),u=e.getHeight();if(h>0)if(0==l){const s=e.getSubimage(0,0,int(Math.max(1,h*n)),u);this.drawImage(t,s,a,i,r.x*n,r.y);}else {const d=e.getSubimage(0,0,h,int(Math.max(1,u*l)));if(0==n)this.drawImage(t,d,a,i,r.x,r.y*l);else {const g=e.getSubimage(0,0,int(Math.max(1,h*n)),u),P=e.getSubimage(0,0,g.getWidth(),d.getHeight());for(i=-s.y;o>1;)this.drawImage(t,g,a,i,r.x*n,r.y),i+=r.y,o--;for(a=-s.x;c>1;)this.drawImage(t,d,a,i,r.x,r.y*l),a+=r.x,c--;this.drawImage(t,P,a,i,r.x*n,r.y*l);}}}t.setComposite(0,0,0);}drawImage(t,e,s,r,a,i){t.drawImage(e,s,r,a,i);}}class Animable extends ImgCore{}class Form extends Animable{}class Basis extends Data{toString(){return this.name}}class Treasure extends Data{tech=r(9);trea=r(11);bslv=r(8);base=r(7);deco=r(7);fruit=r(7);gods=r(3);alien=0;star=0;Treasure(t,e){return overload([t,Basis],[e])&&(this.b=t,this.zread$000000()),overload([t,Basis],[e,Treasure])&&(this.b=t,this.tech=ArrayUtil.clone(e.tech),this.trea=ArrayUtil.clone(e.trea),this.fruit=ArrayUtil.clone(e.fruit),this.gods=ArrayUtil.clone(e.gods),this.alien=e.alien,this.star=e.star,this.bslv=ArrayUtil.clone(e.bslv),this.base=ArrayUtil.clone(e.base),this.deco=ArrayUtil.clone(e.deco)),this}getAlienMulti(){return 7-.01*this.alien}getAtkMulti(){return 1+.005*this.trea[0]}getBaseHealth(t){const e=this.tech[2];let s=e<6?1e3*e:e<8?5e3+2e3*(e-5):9e3+3e3*(e-7);return s+=70*this.trea[8],s+=4e3*(this.bslv[0]-1),int(s*(100+(t?0:this.b.getInc(10)))/100)}getCanonAtk(t){return int((50+50*this.tech[6]+5*this.trea[7])*(100+(t?0:this.b.getInc(6)))/100)}getCannonMagnification(t,e){}getBaseMagnification(t,e,s){if(null!=s){let r=1;const a=UserProfile.getBCData().traits;let i,n;switch(t){case 1:i=1,n=1;break;case 2:i=2,n=2;break;case 3:i=4,n=4;break;case 4:i=0,n=0;break;case 5:i=6,n=6;break;case 6:i=5,n=5;break;case 7:i=8,n=7;break;default:return r}if(e.contains(a.get(i))){const e=Treasure.baseData.get(t);if(null==e||0==this.base[t-1])return r;r=s?e.applyFormulaRaw(n,this.base[t-1]):e.applyFormula(n,this.base[t-1]);}return r}if(null==s)return this.getBaseMagnification(t,e,false)}getDefMulti(){return 1+.005*this.trea[1]}getDropMulti(t){return (.95+.05*this.tech[1]+.005*this.trea[3])*(1+.01*(t?0:this.b.getInc(12)))}getEKAtk(t){return .05*(100+(t?0:this.b.getInc(23)))}getEKDef(t){return 20/(100+(t?0:this.b.getInc(23)))}getFinRes(t,e){const s=6*(this.tech[0]-1)+.3*this.trea[2],r=s+float(Math.floor(s*(e?0:this.b.getInc(11))/100));return int(Math.max(60,t-r))}getFinResGlobal(t,e){if(t<=60)return t;const s=6*(this.tech[0]-1)+.3*this.trea[2],r=float(Math.floor(s*(e?0:this.b.getInc(11))/100));return int(Math.max(60,t-r))}zread$000000(){System_arraycopy(Treasure.MLV,0,this.tech,0,9),System_arraycopy(Treasure.MT,0,this.trea,0,11),this.fruit[0]=this.fruit[2]=this.fruit[1]=this.fruit[3]=300,this.fruit[4]=this.fruit[6]=this.fruit[5]=300,this.bslv[0]=30,this.gods[0]=this.gods[1]=this.gods[2]=100,this.alien=600,this.star=1500;}getStarMulti(t){return 1==t?16-.01*this.star:11-.1*this.gods[t-2]}}class LineUp extends Data{}class BasisLU extends Basis{nyc=r(3);BasisLU(t,e){return overload([t],[e])&&(this._t=(new Treasure).Treasure(this),this.lu=new LineUp),overload([t,BasisSet],[e])&&(this._t=(new Treasure).Treasure(this),this.lu=new LineUp,this.name="lineup "+ArrayUtil.size(t.lb)),overload([t,BasisSet],[e,BasisLU])&&(this._t=(new Treasure).Treasure(this),this.lu=new LineUp,this.name="lineup "+ArrayUtil.size(t.lb),this.nyc=ArrayUtil.clone(e.nyc)),this}}class BasisSet extends Basis{static current(){return UserProfile.getStatic("BasisSet_current",{get:()=>this.def()})}static def(){return this.listRaw(),UserProfile.getStatic("BasisSet_default",{get:()=>(new BasisSet).BasisSet()})}static list(){return this.def(),this.listRaw()}static listRaw(){return UserProfile.getStatic("BasisSet_list",{get:()=>[]})}static setCurrent(t){UserProfile.setStatic("BasisSet_current",t);}lb=[];BasisSet(t){if(overload([t])&&(0==ArrayUtil.size(BasisSet.listRaw())?this.name="temporary":this.name="set "+ArrayUtil.size(BasisSet.listRaw()),this._t=(new Treasure).Treasure(this),BasisSet.setCurrent(this),this.lb.push(this.sele=(new BasisLU).BasisLU(this)),BasisSet.listRaw().push(this)),overload([t,BasisSet])){this.name="set "+ArrayUtil.size(BasisSet.list()),BasisSet.list().push(this),this._t=(new Treasure).Treasure(this,t._t),BasisSet.setCurrent(this);for(const e of t.lb)ArrayUtil.add(this.lb,this.sele=(new BasisLU).BasisLU(this,e));}return this}add(t){return overload([t])?(ArrayUtil.add(this.lb,this.sele=(new BasisLU).BasisLU(this)),this.sele):overload([t,"n"])?-1==t||t>=this.lb.length?this.add():(ArrayUtil.add(this.lb,this.sele=(new BasisLU).BasisLU(this)),this.sele):void 0}copy(){return (new BasisSet).BasisSet(this)}copyCurrent(){return ArrayUtil.add(this.lb,this.sele=(new BasisLU).BasisLU(this,this.sele)),this.sele}getInc(t){return 0}remove(){return ArrayUtil.remove(this.lb,this.sele),this.sele=this.lb[0]}t(){return this._t}}let n=Data.Proc;const l=[n];function hasTypeProp(t){return "function"==typeof t&&"TYPE"in t}for(const t of function getCustomStaticKeys(t){const e=Reflect.ownKeys(t),s=Object.getOwnPropertyNames(Function);return e.filter((t=>"string"==typeof t&&!s.includes(t)))}(n))isClassConstructor(n[t],n.ProcItem)&&(l.push(n[t]),hasTypeProp(n[t])&&l.push(n[t].TYPE));var o=function createRegistry(t){return {constructors:t,meta:{version:"0.0.3",builtAt:1755463211234,buildDurationMs:4850,debugId:"0198b9c2-ebd3-75d4-b689-bbea82ddd1a0"}}}([BasisLU,BasisSet,LineUp,Treasure,class DataUnit extends DefaultData{price=0;respawn=0;limit=0;touch=1;front=0;back=0;pcoin=null;getBack(){return this.back}getFront(){return this.front}getPack(){return this.form}getPrice(){return this.price}getRespawn(){return this.respawn}getLimit(){return this.limit}getPCoin(){return this.pcoin}clone(){const t=Object.assign(Object.create(Object.getPrototypeOf(this)),this);t.traits=ArrayUtil.clone(this.traits),t.proc=this.proc.clone(),t.datks=new Array(t.getAtkCount());for(let e=0;e<t.getAtkCount();e++)t.datks[e]=(new DataAtk).DataAtk(t,e);return t}getSpeed(){return this.speed}},Identifier,Data,...l,Unit,Unit.UnitInfo,class UnitLevel{lvs=r(20);units=[];UnitLevel(t){return this.lvs=s.copyOf(t,20),this}getMult(t){let e=t,s=1-.01*this.lvs[0];for(const t of this.lvs){if(!(e>=10)){s+=t*e*.01;break}s+=.1*t,e-=10;}return s}},Form,Level,class EForm extends Data{EForm(t,e){if(overload([t,Form],[e,"n"])){const s=e;this.f=t,this.level=(new Level).Level(null==t.du.getPCoin()?0:ArrayUtil.size(t.du.getPCoin().info)),this.level.setLevel(s),this.du=t.du;}if(overload([t,Form],[e,Level])){const s=e;this.f=t,this.level=s;const r=this.f.du.getPCoin();this.du=null!=r?r.improve(s.getTalents()):t.du;}return this}},DataAtk,Trait]);

export { o as default };
//# debugId=0198b9c2-ebd3-75d4-b689-bbea82ddd1a0
//# sourceMappingURL=unit.stat.js.map
